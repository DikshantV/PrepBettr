08189745ed60195ff7d211edd8724a72
"use strict";
/**
 * Global Jest Setup for PrepBettr Testing Suite
 *
 * Sets up global test environment, mocks, and shared utilities
 * that are needed across all test files.
 */
Object.defineProperty(exports, "__esModule", { value: true });
// import 'jest-extended';
// Mock Next.js environment variables
process.env.NODE_ENV = 'test';
process.env.NEXT_PUBLIC_APP_URL = 'http://localhost:3000';
process.env.NEXT_PUBLIC_ENVIRONMENT = 'test';
// Mock Azure environment variables
process.env.AZURE_OPENAI_KEY = 'test-azure-openai-key';
process.env.AZURE_OPENAI_ENDPOINT = 'https://test-openai.openai.azure.com';
process.env.AZURE_OPENAI_DEPLOYMENT = 'test-deployment';
process.env.AZURE_SPEECH_KEY = 'test-speech-key';
process.env.AZURE_SPEECH_REGION = 'eastus';
process.env.AZURE_KEY_VAULT_URI = 'https://test-keyvault.vault.azure.net/';
// Mock Firebase environment variables
process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID = 'test-project';
process.env.NEXT_PUBLIC_FIREBASE_API_KEY = 'test-api-key';
process.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN = 'test-project.firebaseapp.com';
process.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET = 'test-project.appspot.com';
process.env.FIREBASE_ADMIN_PRIVATE_KEY = 'test-private-key';
process.env.FIREBASE_ADMIN_CLIENT_EMAIL = 'test@test-project.iam.gserviceaccount.com';
// Mock Dodo Payments
process.env.DODO_API_KEY = 'test-dodo-api-key';
// Suppress console warnings in tests
const originalWarn = console.warn;
const originalError = console.error;
beforeAll(() => {
    console.warn = jest.fn((message) => {
        // Only suppress specific warnings we expect in tests
        if (typeof message === 'string' && (message.includes('Warning: ReactDOM.render is deprecated') ||
            message.includes('Warning: componentWillReceiveProps') ||
            message.includes('gRPC') ||
            message.includes('FIRESTORE_PREFER_REST'))) {
            return;
        }
        originalWarn(message);
    });
    console.error = jest.fn((message) => {
        // Only suppress specific errors we expect in tests
        if (typeof message === 'string' && (message.includes('Firebase Admin SDK') ||
            message.includes('GRPC_VERBOSITY'))) {
            return;
        }
        originalError(message);
    });
});
afterAll(() => {
    console.warn = originalWarn;
    console.error = originalError;
});
// Mock WebSocket for voice tests
global.WebSocket = jest.fn().mockImplementation(() => ({
    readyState: 1,
    send: jest.fn(),
    close: jest.fn(),
    addEventListener: jest.fn(),
    removeEventListener: jest.fn(),
}));
// Mock MediaDevices API for audio tests
global.navigator = global.navigator || {};
Object.defineProperty(global.navigator, 'mediaDevices', {
    writable: true,
    value: {
        getUserMedia: jest.fn().mockResolvedValue({
            getAudioTracks: () => [{
                    stop: jest.fn(),
                    enabled: true
                }],
            getTracks: () => [{
                    stop: jest.fn(),
                    enabled: true
                }]
        })
    }
});
// Mock AudioContext
global.AudioContext = jest.fn().mockImplementation(() => ({
    createAnalyser: jest.fn(() => ({
        connect: jest.fn(),
        disconnect: jest.fn(),
        fftSize: 256,
        frequencyBinCount: 128,
        getByteFrequencyData: jest.fn(),
        getFloatFrequencyData: jest.fn(),
    })),
    createGain: jest.fn(() => ({
        connect: jest.fn(),
        disconnect: jest.fn(),
        gain: { value: 1 }
    })),
    createMediaStreamSource: jest.fn(() => ({
        connect: jest.fn(),
        disconnect: jest.fn()
    })),
    destination: {},
    close: jest.fn().mockResolvedValue(undefined),
    state: 'running'
}));
// Mock performance API
Object.defineProperty(global, 'performance', {
    writable: true,
    value: {
        now: jest.fn(() => Date.now()),
        mark: jest.fn(),
        measure: jest.fn(),
        getEntriesByName: jest.fn(() => []),
        getEntriesByType: jest.fn(() => []),
    }
});
// Setup global fetch mock
global.fetch = jest.fn();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2Rpa3NoYW50dmFzaGlzdGhhL1ByZXBCZXR0ci90ZXN0cy9zZXR1cC9nbG9iYWwtc2V0dXAudHMiLCJtYXBwaW5ncyI6IjtBQUFBOzs7OztHQUtHOztBQUVILDBCQUEwQjtBQUUxQixxQ0FBcUM7QUFDckMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxRQUFRLEdBQUcsTUFBTSxDQUFDO0FBQzlCLE9BQU8sQ0FBQyxHQUFHLENBQUMsbUJBQW1CLEdBQUcsdUJBQXVCLENBQUM7QUFDMUQsT0FBTyxDQUFDLEdBQUcsQ0FBQyx1QkFBdUIsR0FBRyxNQUFNLENBQUM7QUFFN0MsbUNBQW1DO0FBQ25DLE9BQU8sQ0FBQyxHQUFHLENBQUMsZ0JBQWdCLEdBQUcsdUJBQXVCLENBQUM7QUFDdkQsT0FBTyxDQUFDLEdBQUcsQ0FBQyxxQkFBcUIsR0FBRyxzQ0FBc0MsQ0FBQztBQUMzRSxPQUFPLENBQUMsR0FBRyxDQUFDLHVCQUF1QixHQUFHLGlCQUFpQixDQUFDO0FBQ3hELE9BQU8sQ0FBQyxHQUFHLENBQUMsZ0JBQWdCLEdBQUcsaUJBQWlCLENBQUM7QUFDakQsT0FBTyxDQUFDLEdBQUcsQ0FBQyxtQkFBbUIsR0FBRyxRQUFRLENBQUM7QUFDM0MsT0FBTyxDQUFDLEdBQUcsQ0FBQyxtQkFBbUIsR0FBRyx3Q0FBd0MsQ0FBQztBQUUzRSxzQ0FBc0M7QUFDdEMsT0FBTyxDQUFDLEdBQUcsQ0FBQywrQkFBK0IsR0FBRyxjQUFjLENBQUM7QUFDN0QsT0FBTyxDQUFDLEdBQUcsQ0FBQyw0QkFBNEIsR0FBRyxjQUFjLENBQUM7QUFDMUQsT0FBTyxDQUFDLEdBQUcsQ0FBQyxnQ0FBZ0MsR0FBRyw4QkFBOEIsQ0FBQztBQUM5RSxPQUFPLENBQUMsR0FBRyxDQUFDLG1DQUFtQyxHQUFHLDBCQUEwQixDQUFDO0FBQzdFLE9BQU8sQ0FBQyxHQUFHLENBQUMsMEJBQTBCLEdBQUcsa0JBQWtCLENBQUM7QUFDNUQsT0FBTyxDQUFDLEdBQUcsQ0FBQywyQkFBMkIsR0FBRywyQ0FBMkMsQ0FBQztBQUV0RixxQkFB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RSxJQUFJLENBQUMsRUFBRSxFQUFFO1FBQ2xCLGdCQUFnQixFQUFFLElBQUksQ0FBQyxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsRUFBRSxDQUFDO1FBQ25DLGdCQUFnQixFQUFFLElBQUksQ0FBQyxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsRUFBRSxDQUFDO0tBQ3BDO0NBQ0YsQ0FBQyxDQUFDO0FBRUgsMEJBQTBCO0FBQzFCLE1BQU0sQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9Vc2Vycy9kaWtzaGFudHZhc2hpc3RoYS9QcmVwQmV0dHIvdGVzdHMvc2V0dXAvZ2xvYmFsLXNldHVwLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogR2xvYmFsIEplc3QgU2V0dXAgZm9yIFByZXBCZXR0ciBUZXN0aW5nIFN1aXRlXG4gKiBcbiAqIFNldHMgdXAgZ2xvYmFsIHRlc3QgZW52aXJvbm1lbnQsIG1vY2tzLCBhbmQgc2hhcmVkIHV0aWxpdGllc1xuICogdGhhdCBhcmUgbmVlZGVkIGFjcm9zcyBhbGwgdGVzdCBmaWxlcy5cbiAqL1xuXG4vLyBpbXBvcnQgJ2plc3QtZXh0ZW5kZWQnO1xuXG4vLyBNb2NrIE5leHQuanMgZW52aXJvbm1lbnQgdmFyaWFibGVzXG5wcm9jZXNzLmVudi5OT0RFX0VOViA9ICd0ZXN0JztcbnByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0FQUF9VUkwgPSAnaHR0cDovL2xvY2FsaG9zdDozMDAwJztcbnByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0VOVklST05NRU5UID0gJ3Rlc3QnO1xuXG4vLyBNb2NrIEF6dXJlIGVudmlyb25tZW50IHZhcmlhYmxlc1xucHJvY2Vzcy5lbnYuQVpVUkVfT1BFTkFJX0tFWSA9ICd0ZXN0LWF6dXJlLW9wZW5haS1rZXknO1xucHJvY2Vzcy5lbnYuQVpVUkVfT1BFTkFJX0VORFBPSU5UID0gJ2h0dHBzOi8vdGVzdC1vcGVuYWkub3BlbmFpLmF6dXJlLmNvbSc7XG5wcm9jZXNzLmVudi5BWlVSRV9PUEVOQUlfREVQTE9ZTUVOVCA9ICd0ZXN0LWRlcGxveW1lbnQnO1xucHJvY2Vzcy5lbnYuQVpVUkVfU1BFRUNIX0tFWSA9ICd0ZXN0LXNwZWVjaC1rZXknO1xucHJvY2Vzcy5lbnYuQVpVUkVfU1BFRUNIX1JFR0lPTiA9ICdlYXN0dXMnO1xucHJvY2Vzcy5lbnYuQVpVUkVfS0VZX1ZBVUxUX1VSSSA9ICdodHRwczovL3Rlc3Qta2V5dmF1bHQudmF1bHQuYXp1cmUubmV0Lyc7XG5cbi8vIE1vY2sgRmlyZWJhc2UgZW52aXJvbm1lbnQgdmFyaWFibGVzXG5wcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19GSVJFQkFTRV9QUk9KRUNUX0lEID0gJ3Rlc3QtcHJvamVjdCc7XG5wcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19GSVJFQkFTRV9BUElfS0VZID0gJ3Rlc3QtYXBpLWtleSc7XG5wcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19GSVJFQkFTRV9BVVRIX0RPTUFJTiA9ICd0ZXN0LXByb2plY3QuZmlyZWJhc2VhcHAuY29tJztcbnByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0ZJUkVCQVNFX1NUT1JBR0VfQlVDS0VUID0gJ3Rlc3QtcHJvamVjdC5hcHBzcG90LmNvbSc7XG5wcm9jZXNzLmVudi5GSVJFQkFTRV9BRE1JTl9QUklWQVRFX0tFWSA9ICd0ZXN0LXByaXZhdGUta2V5JztcbnByb2Nlc3MuZW52LkZJUkVCQVNFX0FETUlOX0NMSUVOVF9FTUFJTCA9ICd0ZXN0QHRlc3QtcHJvamVjdC5pYW0uZ3NlcnZpY2VhY2NvdW50LmNvbSc7XG5cbi8vIE1vY2sgRG9kbyBQYXltZW50c1xucHJvY2Vzcy5lbnYuRE9ET19BUElfS0VZID0gJ3Rlc3QtZG9kby1hcGkta2V5JztcblxuLy8gU3VwcHJlc3MgY29uc29sZSB3YXJuaW5ncyBpbiB0ZXN0c1xuY29uc3Qgb3JpZ2luYWxXYXJuID0gY29uc29sZS53YXJuO1xuY29uc3Qgb3JpZ2luYWxFcnJvciA9IGNvbnNvbGUuZXJyb3I7XG5cbmJlZm9yZUFsbCgoKSA9PiB7XG4gIGNvbnNvbGUud2FybiA9IGplc3QuZm4oKG1lc3NhZ2UpID0+IHtcbiAgICAvLyBPbmx5IHN1cHByZXNzIHNwZWNpZmljIHdhcm5pbmdzIHdlIGV4cGVjdCBpbiB0ZXN0c1xuICAgIGlmIChcbiAgICAgIHR5cGVvZiBtZXNzYWdlID09PSAnc3RyaW5nJyAmJiAoXG4gICAgICAgIG1lc3NhZ2UuaW5jbHVkZXMoJ1dhcm5pbmc6IFJlYWN0RE9NLnJlbmRlciBpcyBkZXByZWNhdGVkJykgfHxcbiAgICAgICAgbWVzc2FnZS5pbmNsdWRlcygnV2FybmluZzogY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcycpIHx8XG4gICAgICAgIG1lc3NhZ2UuaW5jbHVkZXMoJ2dSUEMnKSB8fFxuICAgICAgICBtZXNzYWdlLmluY2x1ZGVzKCdGSVJFU1RPUkVfUFJFRkVSX1JFU1QnKVxuICAgICAgKVxuICAgICkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBvcmlnaW5hbFdhcm4obWVzc2FnZSk7XG4gIH0pO1xuXG4gIGNvbnNvbGUuZXJyb3IgPSBqZXN0LmZuKChtZXNzYWdlKSA9PiB7XG4gICAgLy8gT25seSBzdXBwcmVzcyBzcGVjaWZpYyBlcnJvcnMgd2UgZXhwZWN0IGluIHRlc3RzXG4gICAgaWYgKFxuICAgICAgdHlwZW9mIG1lc3NhZ2UgPT09ICdzdHJpbmcnICYmIChcbiAgICAgICAgbWVzc2FnZS5pbmNsdWRlcygnRmlyZWJhc2UgQWRtaW4gU0RLJykgfHxcbiAgICAgICAgbWVzc2FnZS5pbmNsdWRlcygnR1JQQ19WRVJCT1NJVFknKVxuICAgICAgKVxuICAgICkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBvcmlnaW5hbEVycm9yKG1lc3NhZ2UpO1xuICB9KTtcbn0pO1xuXG5hZnRlckFsbCgoKSA9PiB7XG4gIGNvbnNvbGUud2FybiA9IG9yaWdpbmFsV2FybjtcbiAgY29uc29sZS5lcnJvciA9IG9yaWdpbmFsRXJyb3I7XG59KTtcblxuLy8gTW9jayBXZWJTb2NrZXQgZm9yIHZvaWNlIHRlc3RzXG5nbG9iYWwuV2ViU29ja2V0ID0gamVzdC5mbigpLm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiAoe1xuICByZWFkeVN0YXRlOiAxLFxuICBzZW5kOiBqZXN0LmZuKCksXG4gIGNsb3NlOiBqZXN0LmZuKCksXG4gIGFkZEV2ZW50TGlzdGVuZXI6IGplc3QuZm4oKSxcbiAgcmVtb3ZlRXZlbnRMaXN0ZW5lcjogamVzdC5mbigpLFxufSkpO1xuXG4vLyBNb2NrIE1lZGlhRGV2aWNlcyBBUEkgZm9yIGF1ZGlvIHRlc3RzXG5nbG9iYWwubmF2aWdhdG9yID0gZ2xvYmFsLm5hdmlnYXRvciB8fCB7fTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShnbG9iYWwubmF2aWdhdG9yLCAnbWVkaWFEZXZpY2VzJywge1xuICB3cml0YWJsZTogdHJ1ZSxcbiAgdmFsdWU6IHtcbiAgICBnZXRVc2VyTWVkaWE6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICBnZXRBdWRpb1RyYWNrczogKCkgPT4gW3tcbiAgICAgICAgc3RvcDogamVzdC5mbigpLFxuICAgICAgICBlbmFibGVkOiB0cnVlXG4gICAgICB9XSxcbiAgICAgIGdldFRyYWNrczogKCkgPT4gW3tcbiAgICAgICAgc3RvcDogamVzdC5mbigpLFxuICAgICAgICBlbmFibGVkOiB0cnVlXG4gICAgICB9XVxuICAgIH0pXG4gIH1cbn0pO1xuXG4vLyBNb2NrIEF1ZGlvQ29udGV4dFxuZ2xvYmFsLkF1ZGlvQ29udGV4dCA9IGplc3QuZm4oKS5tb2NrSW1wbGVtZW50YXRpb24oKCkgPT4gKHtcbiAgY3JlYXRlQW5hbHlzZXI6IGplc3QuZm4oKCkgPT4gKHtcbiAgICBjb25uZWN0OiBqZXN0LmZuKCksXG4gICAgZGlzY29ubmVjdDogamVzdC5mbigpLFxuICAgIGZmdFNpemU6IDI1NixcbiAgICBmcmVxdWVuY3lCaW5Db3VudDogMTI4LFxuICAgIGdldEJ5dGVGcmVxdWVuY3lEYXRhOiBqZXN0LmZuKCksXG4gICAgZ2V0RmxvYXRGcmVxdWVuY3lEYXRhOiBqZXN0LmZuKCksXG4gIH0pKSxcbiAgY3JlYXRlR2FpbjogamVzdC5mbigoKSA9PiAoe1xuICAgIGNvbm5lY3Q6IGplc3QuZm4oKSxcbiAgICBkaXNjb25uZWN0OiBqZXN0LmZuKCksXG4gICAgZ2FpbjogeyB2YWx1ZTogMSB9XG4gIH0pKSxcbiAgY3JlYXRlTWVkaWFTdHJlYW1Tb3VyY2U6IGplc3QuZm4oKCkgPT4gKHtcbiAgICBjb25uZWN0OiBqZXN0LmZuKCksXG4gICAgZGlzY29ubmVjdDogamVzdC5mbigpXG4gIH0pKSxcbiAgZGVzdGluYXRpb246IHt9LFxuICBjbG9zZTogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHVuZGVmaW5lZCksXG4gIHN0YXRlOiAncnVubmluZydcbn0pKTtcblxuLy8gTW9jayBwZXJmb3JtYW5jZSBBUElcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShnbG9iYWwsICdwZXJmb3JtYW5jZScsIHtcbiAgd3JpdGFibGU6IHRydWUsXG4gIHZhbHVlOiB7XG4gICAgbm93OiBqZXN0LmZuKCgpID0+IERhdGUubm93KCkpLFxuICAgIG1hcms6IGplc3QuZm4oKSxcbiAgICBtZWFzdXJlOiBqZXN0LmZuKCksXG4gICAgZ2V0RW50cmllc0J5TmFtZTogamVzdC5mbigoKSA9PiBbXSksXG4gICAgZ2V0RW50cmllc0J5VHlwZTogamVzdC5mbigoKSA9PiBbXSksXG4gIH1cbn0pO1xuXG4vLyBTZXR1cCBnbG9iYWwgZmV0Y2ggbW9ja1xuZ2xvYmFsLmZldGNoID0gamVzdC5mbigpO1xuXG5leHBvcnQge307XG4iXSwidmVyc2lvbiI6M30=