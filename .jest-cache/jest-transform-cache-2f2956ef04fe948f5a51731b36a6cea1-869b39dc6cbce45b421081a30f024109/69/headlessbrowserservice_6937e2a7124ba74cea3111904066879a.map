{"version":3,"names":["cov_1ahyucy3eo","actualCoverage","chromium","s","require","Bottleneck","v4","uuidv4","automationLogger","BlobServiceClient","DefaultAzureCredential","HeadlessBrowserService","constructor","f","browsers","Map","maxConcurrentBrowsers","activeBrowsers","limiter","maxConcurrent","minTime","reservoir","reservoirRefreshAmount","reservoirRefreshInterval","browserConfig","headless","args","timeout","viewport","width","height","retryConfig","maxRetries","baseDelay","maxDelay","backoffFactor","blobServiceClient","initializeBlobService","connectionString","process","env","AzureWebJobsStorage","b","fromConnectionString","credential","accountName","AZURE_STORAGE_ACCOUNT_NAME","error","console","applyToJob","jobListing","userProfile","options","applicationId","startTime","Date","now","logInfo","id","jobId","userId","jobUrl","final_url","easyApply","easy_apply","portal","jobPortal","name","Error","result","schedule","executeApplicationWithRetry","duration","success","attempts","errorMessage","logApplicationInsights","message","screenshotPath","formData","logError","lastError","attempt","executeSingleApplication","delay","Math","min","pow","Promise","resolve","setTimeout","browser","page","launchBrowser","newPage","setupPageMonitoring","goto","waitUntil","captureScreenshot","portalHandler","detectJobPortal","fillApplicationForm","screeningAnswers","handleScreeningQuestions","resumeUploaded","uploadResume","submissionResult","submitApplication","finalScreenshot","portalType","type","screenshotError","warn","closeBrowser","browserId","launch","set","createdAt","lastActivity","log","browserData","entries","delete","close","max","on","msg","text","request","url","failure","errorText","setDefaultTimeout","setDefaultNavigationTimeout","toLowerCase","title","includes","applyButtonSelector","formSelectors","firstName","lastName","email","phone","resume","submitSelector","nextSelector","applyButton","$","click","waitForTimeout","firstNameField","fill","split","lastNameField","slice","join","emailField","phoneField","answers","questionSelectors","selector","questions","$$","i","length","question","questionText","textContent","answer","generateScreeningAnswer","input","inputType","getAttribute","check","trim","Object","keys","lowerQuestion","experienceYears","toString","experience","workAuthorization","expectedSalary","userSkills","skills","jobRequirements","requirements","fileInput","resumePath","getResumeFile","setInputFiles","resumeBlobPath","containerClient","getContainerClient","blobClient","getBlobClient","tempPath","downloadToFile","fs","writeFileSync","submitButton","successIndicators","submissionSuccess","indicator","element","errorIndicators","submissionError","stage","screenshot","path","fullPage","uploadScreenshotToBlob","createIfNotExists","blobName","blockBlobClient","getBlockBlobClient","uploadFile","eventName","properties","jobTitle","company","timestamp","toISOString","JSON","stringify","level","cleanup","maxIdleTime","getHealthStatus","queuedOperations","counts","RECEIVED","DONE","status","module","exports"],"sources":["headless-browser-service.js"],"sourcesContent":["const { chromium } = require('playwright');\nconst Bottleneck = require('bottleneck');\nconst { v4: uuidv4 } = require('uuid');\nconst automationLogger = require('./automation-logs');\nconst { BlobServiceClient } = require('@azure/storage-blob');\nconst { DefaultAzureCredential } = require('@azure/identity');\n\n/**\n * Headless Browser Automation Service for Job Applications\n * Phase 2: Automated application submission using Playwright\n */\nclass HeadlessBrowserService {\n    constructor() {\n        this.browsers = new Map(); // Track active browsers\n        this.maxConcurrentBrowsers = 5; // Limit to avoid IP bans\n        this.activeBrowsers = 0;\n        \n        // Initialize rate limiting with Bottleneck\n        this.limiter = new Bottleneck({\n            maxConcurrent: this.maxConcurrentBrowsers,\n            minTime: 2000, // 2 second delay between operations\n            reservoir: 50, // 50 operations per...\n            reservoirRefreshAmount: 50,\n            reservoirRefreshInterval: 60 * 1000, // 1 minute\n        });\n\n        // Browser configuration\n        this.browserConfig = {\n            headless: true,\n            args: [\n                '--no-sandbox',\n                '--disable-setuid-sandbox',\n                '--disable-dev-shm-usage',\n                '--disable-accelerated-2d-canvas',\n                '--no-first-run',\n                '--no-zygote',\n                '--single-process',\n                '--disable-gpu',\n                '--user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36'\n            ],\n            timeout: 60000, // 1 minute timeout\n            viewport: {\n                width: 1366,\n                height: 768\n            }\n        };\n\n        // Retry configuration\n        this.retryConfig = {\n            maxRetries: 3,\n            baseDelay: 2000,\n            maxDelay: 10000,\n            backoffFactor: 2\n        };\n\n        // Initialize blob service for resume uploads\n        this.blobServiceClient = null;\n        this.initializeBlobService();\n    }\n\n    async initializeBlobService() {\n        try {\n            const connectionString = process.env.AzureWebJobsStorage;\n            if (connectionString) {\n                this.blobServiceClient = BlobServiceClient.fromConnectionString(connectionString);\n            } else {\n                const credential = new DefaultAzureCredential();\n                const accountName = process.env.AZURE_STORAGE_ACCOUNT_NAME;\n                this.blobServiceClient = new BlobServiceClient(\n                    `https://${accountName}.blob.core.windows.net`,\n                    credential\n                );\n            }\n        } catch (error) {\n            console.error('❌ Failed to initialize blob service for headless browser:', error);\n        }\n    }\n\n    /**\n     * Main function to apply to a job using headless browser automation\n     */\n    async applyToJob(jobListing, userProfile, options = {}) {\n        const applicationId = uuidv4();\n        const startTime = Date.now();\n\n        await automationLogger.logInfo(\n            'headless_application_started',\n            `Starting headless application for job ${jobListing.id}`,\n            {\n                applicationId,\n                jobId: jobListing.id,\n                userId: userProfile.id,\n                jobUrl: jobListing.final_url,\n                easyApply: jobListing.easy_apply,\n                portal: jobListing.jobPortal?.name\n            }\n        );\n\n        try {\n            // Check if job is eligible for headless application\n            if (!jobListing.easy_apply) {\n                throw new Error('Job does not support easy apply - headless automation skipped');\n            }\n\n            if (!jobListing.final_url) {\n                throw new Error('Job URL is required for headless automation');\n            }\n\n            // Apply rate limiting and concurrency control\n            const result = await this.limiter.schedule(() => \n                this.executeApplicationWithRetry(applicationId, jobListing, userProfile, options)\n            );\n\n            const duration = Date.now() - startTime;\n            \n            await automationLogger.logInfo(\n                'headless_application_completed',\n                `Headless application ${result.success ? 'succeeded' : 'failed'} for job ${jobListing.id}`,\n                {\n                    applicationId,\n                    jobId: jobListing.id,\n                    userId: userProfile.id,\n                    success: result.success,\n                    duration: `${duration}ms`,\n                    attempts: result.attempts,\n                    errorMessage: result.errorMessage\n                }\n            );\n\n            // Log Application Insights metrics\n            this.logApplicationInsights(applicationId, jobListing, userProfile, result, duration);\n\n            return {\n                applicationId,\n                success: result.success,\n                message: result.message || (result.success ? 'Application submitted successfully' : 'Application failed'),\n                duration,\n                attempts: result.attempts,\n                screenshotPath: result.screenshotPath,\n                formData: result.formData\n            };\n\n        } catch (error) {\n            const duration = Date.now() - startTime;\n            \n            await automationLogger.logError(\n                'headless_application_error',\n                error,\n                {\n                    applicationId,\n                    jobId: jobListing.id,\n                    userId: userProfile.id,\n                    duration: `${duration}ms`\n                }\n            );\n\n            // Log error to Application Insights\n            this.logApplicationInsights(applicationId, jobListing, userProfile, { \n                success: false, \n                errorMessage: error.message,\n                attempts: 1\n            }, duration);\n\n            return {\n                applicationId,\n                success: false,\n                message: error.message,\n                duration,\n                attempts: 1\n            };\n        }\n    }\n\n    /**\n     * Execute application with exponential backoff retry logic\n     */\n    async executeApplicationWithRetry(applicationId, jobListing, userProfile, options) {\n        let lastError;\n        let attempts = 0;\n\n        while (attempts < this.retryConfig.maxRetries) {\n            attempts++;\n            \n            try {\n                await automationLogger.logInfo(\n                    'headless_application_attempt',\n                    `Attempt ${attempts}/${this.retryConfig.maxRetries} for application ${applicationId}`,\n                    { applicationId, jobId: jobListing.id, attempt: attempts }\n                );\n\n                const result = await this.executeSingleApplication(applicationId, jobListing, userProfile, options);\n                \n                if (result.success) {\n                    return { ...result, attempts };\n                }\n\n                lastError = new Error(result.message || 'Application failed');\n\n            } catch (error) {\n                lastError = error;\n                \n                await automationLogger.logError(\n                    'headless_application_attempt_error',\n                    error,\n                    { applicationId, jobId: jobListing.id, attempt: attempts }\n                );\n            }\n\n            // Wait before retry (exponential backoff)\n            if (attempts < this.retryConfig.maxRetries) {\n                const delay = Math.min(\n                    this.retryConfig.baseDelay * Math.pow(this.retryConfig.backoffFactor, attempts - 1),\n                    this.retryConfig.maxDelay\n                );\n                \n                await new Promise(resolve => setTimeout(resolve, delay));\n            }\n        }\n\n        // All retries exhausted\n        return {\n            success: false,\n            message: `Application failed after ${attempts} attempts: ${lastError?.message || 'Unknown error'}`,\n            errorMessage: lastError?.message,\n            attempts\n        };\n    }\n\n    /**\n     * Execute a single application attempt\n     */\n    async executeSingleApplication(applicationId, jobListing, userProfile, options) {\n        let browser = null;\n        let page = null;\n        let screenshotPath = null;\n\n        try {\n            // Launch browser\n            browser = await this.launchBrowser();\n            page = await browser.newPage();\n\n            // Set up page monitoring\n            await this.setupPageMonitoring(page, applicationId);\n\n            // Navigate to job URL\n            await automationLogger.logInfo(\n                'headless_navigation_started',\n                `Navigating to job URL: ${jobListing.final_url}`,\n                { applicationId, jobUrl: jobListing.final_url }\n            );\n\n            await page.goto(jobListing.final_url, { \n                waitUntil: 'networkidle',\n                timeout: 30000 \n            });\n\n            // Take screenshot for debugging\n            screenshotPath = await this.captureScreenshot(page, applicationId, 'initial');\n\n            // Detect and handle the job portal\n            const portalHandler = await this.detectJobPortal(page, jobListing);\n            \n            if (!portalHandler) {\n                throw new Error(`Unsupported job portal: ${jobListing.jobPortal?.name || 'Unknown'}`);\n            }\n\n            // Fill out the application form\n            const formData = await this.fillApplicationForm(\n                page, \n                portalHandler, \n                jobListing, \n                userProfile,\n                applicationId\n            );\n\n            // Handle screening questions\n            const screeningAnswers = await this.handleScreeningQuestions(\n                page,\n                portalHandler,\n                jobListing,\n                userProfile,\n                applicationId\n            );\n\n            // Upload resume\n            const resumeUploaded = await this.uploadResume(\n                page,\n                portalHandler,\n                userProfile,\n                applicationId\n            );\n\n            // Submit application\n            const submissionResult = await this.submitApplication(\n                page,\n                portalHandler,\n                applicationId\n            );\n\n            // Take final screenshot\n            const finalScreenshot = await this.captureScreenshot(page, applicationId, 'final');\n\n            return {\n                success: submissionResult.success,\n                message: submissionResult.message,\n                formData,\n                screeningAnswers,\n                resumeUploaded,\n                screenshotPath: finalScreenshot || screenshotPath,\n                portalType: portalHandler.type\n            };\n\n        } catch (error) {\n            // Capture error screenshot\n            if (page) {\n                try {\n                    screenshotPath = await this.captureScreenshot(page, applicationId, 'error');\n                } catch (screenshotError) {\n                    console.warn('Failed to capture error screenshot:', screenshotError);\n                }\n            }\n\n            throw error;\n\n        } finally {\n            // Clean up browser resources\n            if (browser) {\n                await this.closeBrowser(browser);\n            }\n        }\n    }\n\n    /**\n     * Launch a new browser instance with proper configuration\n     */\n    async launchBrowser() {\n        if (this.activeBrowsers >= this.maxConcurrentBrowsers) {\n            throw new Error(`Maximum concurrent browsers (${this.maxConcurrentBrowsers}) exceeded`);\n        }\n\n        const browserId = uuidv4();\n        \n        try {\n            const browser = await chromium.launch(this.browserConfig);\n            \n            // Track the browser\n            this.browsers.set(browserId, {\n                browser,\n                createdAt: Date.now(),\n                lastActivity: Date.now()\n            });\n            \n            this.activeBrowsers++;\n            \n            console.log(`🌐 Browser launched (${browserId}), active browsers: ${this.activeBrowsers}`);\n            \n            return browser;\n\n        } catch (error) {\n            console.error('❌ Failed to launch browser:', error);\n            throw new Error(`Browser launch failed: ${error.message}`);\n        }\n    }\n\n    /**\n     * Close browser and clean up resources\n     */\n    async closeBrowser(browser) {\n        try {\n            // Find and remove from tracking\n            for (const [browserId, browserData] of this.browsers.entries()) {\n                if (browserData.browser === browser) {\n                    this.browsers.delete(browserId);\n                    break;\n                }\n            }\n\n            await browser.close();\n            this.activeBrowsers = Math.max(0, this.activeBrowsers - 1);\n            \n            console.log(`🔒 Browser closed, active browsers: ${this.activeBrowsers}`);\n\n        } catch (error) {\n            console.error('❌ Error closing browser:', error);\n        }\n    }\n\n    /**\n     * Set up page monitoring and error handling\n     */\n    async setupPageMonitoring(page, applicationId) {\n        // Handle console messages\n        page.on('console', msg => {\n            if (msg.type() === 'error') {\n                console.warn(`Browser console error (${applicationId}):`, msg.text());\n            }\n        });\n\n        // Handle page errors\n        page.on('pageerror', error => {\n            console.error(`Page error (${applicationId}):`, error);\n        });\n\n        // Handle request failures\n        page.on('requestfailed', request => {\n            console.warn(`Request failed (${applicationId}):`, request.url(), request.failure()?.errorText);\n        });\n\n        // Set default timeout\n        page.setDefaultTimeout(30000);\n        page.setDefaultNavigationTimeout(30000);\n    }\n\n    /**\n     * Detect the job portal type and return appropriate handler\n     */\n    async detectJobPortal(page, jobListing) {\n        const url = page.url().toLowerCase();\n        const title = await page.title();\n        \n        // TheirStack detection (check first to avoid LinkedIn false positives)\n        if (url.includes('theirstack.com') || jobListing.jobPortal?.name === 'TheirStack') {\n            return {\n                type: 'theirstack',\n                applyButtonSelector: '.apply-button, button[class*=\"apply\"]',\n                formSelectors: {\n                    firstName: 'input[name*=\"first\"], input[placeholder*=\"First\"]',\n                    lastName: 'input[name*=\"last\"], input[placeholder*=\"Last\"]',\n                    email: 'input[name*=\"email\"], input[type=\"email\"]',\n                    phone: 'input[name*=\"phone\"], input[type=\"tel\"]',\n                    resume: 'input[type=\"file\"]'\n                },\n                submitSelector: 'button[type=\"submit\"], .submit-application'\n            };\n        }\n\n        // Indeed detection\n        if (url.includes('indeed.com') || title.includes('Indeed')) {\n            return {\n                type: 'indeed',\n                applyButtonSelector: 'button[data-jk], .ia-IndeedApplyButton',\n                formSelectors: {\n                    firstName: 'input[name*=\"firstName\"], input[id*=\"fname\"]',\n                    lastName: 'input[name*=\"lastName\"], input[id*=\"lname\"]',\n                    email: 'input[name*=\"email\"], input[type=\"email\"]',\n                    phone: 'input[name*=\"phone\"], input[type=\"tel\"]',\n                    resume: 'input[type=\"file\"]'\n                },\n                submitSelector: 'button[type=\"submit\"], .ia-continueButton'\n            };\n        }\n\n        // LinkedIn Jobs detection (check after TheirStack to avoid conflicts)\n        if (url.includes('linkedin.com') || title.includes('LinkedIn')) {\n            return {\n                type: 'linkedin',\n                applyButtonSelector: 'button[aria-label*=\"Easy Apply\"], .jobs-apply-button',\n                formSelectors: {\n                    firstName: 'input[name*=\"firstName\"], input[id*=\"firstName\"]',\n                    lastName: 'input[name*=\"lastName\"], input[id*=\"lastName\"]',\n                    email: 'input[name*=\"email\"], input[type=\"email\"]',\n                    phone: 'input[name*=\"phone\"], input[type=\"tel\"]',\n                    resume: 'input[type=\"file\"][accept*=\"pdf\"], input[type=\"file\"]'\n                },\n                submitSelector: 'button[aria-label*=\"Submit\"], .artdeco-button--primary',\n                nextSelector: 'button[aria-label*=\"Next\"], .artdeco-button--primary'\n            };\n        }\n\n        // Generic fallback handler\n        return {\n            type: 'generic',\n            applyButtonSelector: 'button[class*=\"apply\"], a[class*=\"apply\"], .apply-btn',\n            formSelectors: {\n                firstName: 'input[name*=\"first\"], input[placeholder*=\"First\"], input[id*=\"first\"]',\n                lastName: 'input[name*=\"last\"], input[placeholder*=\"Last\"], input[id*=\"last\"]',\n                email: 'input[name*=\"email\"], input[type=\"email\"]',\n                phone: 'input[name*=\"phone\"], input[type=\"tel\"]',\n                resume: 'input[type=\"file\"]'\n            },\n            submitSelector: 'button[type=\"submit\"], input[type=\"submit\"], .submit-btn'\n        };\n    }\n\n    /**\n     * Fill out application form with user profile data\n     */\n    async fillApplicationForm(page, portalHandler, jobListing, userProfile, applicationId) {\n        await automationLogger.logInfo(\n            'headless_form_filling_started',\n            `Starting form filling for ${portalHandler.type} portal`,\n            { applicationId, portalType: portalHandler.type }\n        );\n\n        const formData = {};\n\n        try {\n            // Click apply button if present\n            const applyButton = await page.$(portalHandler.applyButtonSelector);\n            if (applyButton) {\n                await applyButton.click();\n                await page.waitForTimeout(2000); // Wait for form to load\n            }\n\n            // Fill first name\n            const firstNameField = await page.$(portalHandler.formSelectors.firstName);\n            if (firstNameField) {\n                await firstNameField.fill(userProfile.firstName || userProfile.name?.split(' ')[0] || '');\n                formData.firstName = userProfile.firstName || userProfile.name?.split(' ')[0] || '';\n            }\n\n            // Fill last name\n            const lastNameField = await page.$(portalHandler.formSelectors.lastName);\n            if (lastNameField) {\n                const lastName = userProfile.lastName || \n                                userProfile.name?.split(' ').slice(1).join(' ') || '';\n                await lastNameField.fill(lastName);\n                formData.lastName = lastName;\n            }\n\n            // Fill email\n            const emailField = await page.$(portalHandler.formSelectors.email);\n            if (emailField) {\n                await emailField.fill(userProfile.email || '');\n                formData.email = userProfile.email || '';\n            }\n\n            // Fill phone\n            const phoneField = await page.$(portalHandler.formSelectors.phone);\n            if (phoneField && userProfile.phone) {\n                await phoneField.fill(userProfile.phone);\n                formData.phone = userProfile.phone;\n            }\n\n            await automationLogger.logInfo(\n                'headless_form_filled',\n                `Form fields filled successfully`,\n                { applicationId, formData }\n            );\n\n            return formData;\n\n        } catch (error) {\n            await automationLogger.logError(\n                'headless_form_filling_error',\n                error,\n                { applicationId, portalType: portalHandler.type }\n            );\n            \n            throw new Error(`Form filling failed: ${error.message}`);\n        }\n    }\n\n    /**\n     * Handle screening questions using AI\n     */\n    async handleScreeningQuestions(page, portalHandler, jobListing, userProfile, applicationId) {\n        const answers = {};\n\n        try {\n            // Look for common screening question patterns\n            const questionSelectors = [\n                'div[class*=\"question\"]',\n                '.screening-question',\n                'fieldset',\n                'div[data-test*=\"question\"]'\n            ];\n\n            for (const selector of questionSelectors) {\n                const questions = await page.$$(selector);\n                \n                for (let i = 0; i < questions.length; i++) {\n                    const question = questions[i];\n                    const questionText = await question.textContent();\n                    \n                    if (questionText && questionText.length > 10) {\n                        const answer = await this.generateScreeningAnswer(\n                            questionText,\n                            jobListing,\n                            userProfile\n                        );\n                        \n                        // Try to fill the answer\n                        const input = await question.$('input, select, textarea');\n                        if (input && answer) {\n                            const inputType = await input.getAttribute('type');\n                            \n                            if (inputType === 'radio' || inputType === 'checkbox') {\n                                if (answer.toLowerCase().includes('yes') || \n                                    answer.toLowerCase().includes('true')) {\n                                    await input.check();\n                                }\n                            } else {\n                                await input.fill(answer);\n                            }\n                            \n                            answers[`question_${i}`] = {\n                                question: questionText.trim(),\n                                answer: answer\n                            };\n                        }\n                    }\n                }\n            }\n\n            if (Object.keys(answers).length > 0) {\n                await automationLogger.logInfo(\n                    'headless_screening_completed',\n                    `Answered ${Object.keys(answers).length} screening questions`,\n                    { applicationId, answers }\n                );\n            }\n\n            return answers;\n\n        } catch (error) {\n            await automationLogger.logError(\n                'headless_screening_error',\n                error,\n                { applicationId }\n            );\n            \n            return answers; // Return partial answers\n        }\n    }\n\n    /**\n     * Generate intelligent answers to screening questions\n     */\n    async generateScreeningAnswer(question, jobListing, userProfile) {\n        try {\n            // Simple rule-based answering for common questions\n            const lowerQuestion = question.toLowerCase();\n            \n            // Experience questions - check for specific technologies/skills\n            if (lowerQuestion.includes('years of experience') || \n                lowerQuestion.includes('how long have you') ||\n                lowerQuestion.includes('how many years')) {\n                \n                // Check if question is about specific technology\n                if (lowerQuestion.includes('javascript')) {\n                    return (userProfile.experienceYears || 5).toString();\n                }\n                \n                const experienceYears = userProfile.experienceYears || \n                                      userProfile.experience?.length || 2;\n                return experienceYears.toString();\n            }\n            \n            // Authorization questions\n            if (lowerQuestion.includes('authorized to work') ||\n                lowerQuestion.includes('visa') ||\n                lowerQuestion.includes('work permit')) {\n                return userProfile.workAuthorization || 'Yes';\n            }\n            \n            // Salary expectations\n            if (lowerQuestion.includes('salary') || \n                lowerQuestion.includes('compensation')) {\n                return userProfile.expectedSalary || 'Negotiable';\n            }\n            \n            // Boolean questions - default to positive responses\n            if (lowerQuestion.includes('are you') || \n                lowerQuestion.includes('do you') ||\n                lowerQuestion.includes('have you') ||\n                lowerQuestion.includes('can you')) {\n                \n                // Check if it's asking about specific skills\n                const userSkills = userProfile.skills?.join(' ').toLowerCase() || '';\n                const jobRequirements = jobListing.requirements?.join(' ').toLowerCase() || '';\n                \n                if (userSkills.includes(lowerQuestion) || \n                    jobRequirements.includes(lowerQuestion)) {\n                    return 'Yes';\n                }\n                \n                return 'Yes'; // Default positive response\n            }\n            \n            // Default fallback\n            return 'Please see resume for details';\n\n        } catch (error) {\n            console.error('Error generating screening answer:', error);\n            return 'Please see resume for details';\n        }\n    }\n\n    /**\n     * Upload resume file\n     */\n    async uploadResume(page, portalHandler, userProfile, applicationId) {\n        try {\n            const fileInput = await page.$(portalHandler.formSelectors.resume);\n            \n            if (!fileInput) {\n                console.warn(`No file upload field found for application ${applicationId}`);\n                return false;\n            }\n\n            // Get resume from user profile or cloud storage\n            const resumePath = await this.getResumeFile(userProfile, applicationId);\n            \n            if (!resumePath) {\n                console.warn(`No resume file available for user ${userProfile.id}`);\n                return false;\n            }\n\n            await fileInput.setInputFiles(resumePath);\n            \n            await automationLogger.logInfo(\n                'headless_resume_uploaded',\n                `Resume uploaded successfully`,\n                { applicationId, resumePath }\n            );\n\n            return true;\n\n        } catch (error) {\n            await automationLogger.logError(\n                'headless_resume_upload_error',\n                error,\n                { applicationId }\n            );\n            \n            return false;\n        }\n    }\n\n    /**\n     * Get resume file from cloud storage or generate one\n     */\n    async getResumeFile(userProfile, applicationId) {\n        try {\n            // First, try to get resume from cloud storage\n            if (this.blobServiceClient && userProfile.resumeBlobPath) {\n                const containerClient = this.blobServiceClient.getContainerClient('resumes');\n                const blobClient = containerClient.getBlobClient(userProfile.resumeBlobPath);\n                \n                // Download to temporary file\n                const tempPath = `/tmp/resume_${applicationId}.pdf`;\n                await blobClient.downloadToFile(tempPath);\n                \n                return tempPath;\n            }\n\n            // Fallback: Generate a simple resume from profile data\n            if (userProfile.resume) {\n                const tempPath = `/tmp/resume_${applicationId}.txt`;\n                const fs = require('fs');\n                fs.writeFileSync(tempPath, userProfile.resume);\n                \n                return tempPath;\n            }\n\n            return null;\n\n        } catch (error) {\n            console.error('Error getting resume file:', error);\n            return null;\n        }\n    }\n\n    /**\n     * Submit the completed application\n     */\n    async submitApplication(page, portalHandler, applicationId) {\n        try {\n            // Look for submit button\n            const submitButton = await page.$(portalHandler.submitSelector);\n            \n            if (!submitButton) {\n                throw new Error('Submit button not found');\n            }\n\n            // Click submit\n            await submitButton.click();\n            \n            // Wait for submission to complete\n            await page.waitForTimeout(3000);\n            \n            // Check for success indicators\n            const successIndicators = [\n                'text=\"Application submitted\"',\n                'text=\"Thank you\"',\n                'text=\"Success\"',\n                '[class*=\"success\"]',\n                '[class*=\"confirmation\"]'\n            ];\n            \n            let submissionSuccess = false;\n            for (const indicator of successIndicators) {\n                const element = await page.$(indicator);\n                if (element) {\n                    submissionSuccess = true;\n                    break;\n                }\n            }\n\n            // Check for error indicators\n            const errorIndicators = [\n                'text=\"Error\"',\n                'text=\"Failed\"',\n                '[class*=\"error\"]',\n                '[class*=\"alert-danger\"]'\n            ];\n            \n            let submissionError = null;\n            for (const indicator of errorIndicators) {\n                const element = await page.$(indicator);\n                if (element) {\n                    submissionError = await element.textContent();\n                    break;\n                }\n            }\n\n            if (submissionError) {\n                throw new Error(`Application submission failed: ${submissionError}`);\n            }\n\n            await automationLogger.logInfo(\n                'headless_application_submitted',\n                `Application submitted successfully`,\n                { applicationId, success: submissionSuccess }\n            );\n\n            return {\n                success: submissionSuccess,\n                message: submissionSuccess ? 'Application submitted successfully' : 'Application status unclear'\n            };\n\n        } catch (error) {\n            await automationLogger.logError(\n                'headless_submission_error',\n                error,\n                { applicationId }\n            );\n            \n            return {\n                success: false,\n                message: `Submission failed: ${error.message}`\n            };\n        }\n    }\n\n    /**\n     * Capture screenshot for debugging and audit trail\n     */\n    async captureScreenshot(page, applicationId, stage) {\n        try {\n            const screenshotPath = `/tmp/screenshot_${applicationId}_${stage}_${Date.now()}.png`;\n            await page.screenshot({ \n                path: screenshotPath,\n                fullPage: true \n            });\n            \n            // Upload to blob storage if available\n            if (this.blobServiceClient) {\n                await this.uploadScreenshotToBlob(screenshotPath, applicationId, stage);\n            }\n            \n            return screenshotPath;\n\n        } catch (error) {\n            console.error('Error capturing screenshot:', error);\n            return null;\n        }\n    }\n\n    /**\n     * Upload screenshot to blob storage\n     */\n    async uploadScreenshotToBlob(screenshotPath, applicationId, stage) {\n        try {\n            const containerClient = this.blobServiceClient.getContainerClient('application-screenshots');\n            await containerClient.createIfNotExists();\n            \n            const blobName = `${applicationId}/${stage}_${Date.now()}.png`;\n            const blockBlobClient = containerClient.getBlockBlobClient(blobName);\n            \n            await blockBlobClient.uploadFile(screenshotPath);\n            \n            console.log(`Screenshot uploaded to blob: ${blobName}`);\n\n        } catch (error) {\n            console.error('Error uploading screenshot to blob:', error);\n        }\n    }\n\n    /**\n     * Log metrics to Application Insights\n     */\n    logApplicationInsights(applicationId, jobListing, userProfile, result, duration) {\n        try {\n            const eventName = result.success ? 'applicationSuccess' : 'applicationError';\n            \n            const properties = {\n                applicationId,\n                jobId: jobListing.id,\n                userId: userProfile.id,\n                portal: jobListing.jobPortal?.name || 'Unknown',\n                jobTitle: jobListing.title,\n                company: jobListing.company,\n                duration: `${duration}ms`,\n                attempts: result.attempts || 1,\n                timestamp: new Date().toISOString()\n            };\n\n            if (!result.success) {\n                properties.errorMessage = result.errorMessage || 'Unknown error';\n            }\n\n            // Log to Application Insights (assuming telemetry client is available)\n            console.log(`APPINSIGHTS ${JSON.stringify({\n                level: result.success ? 'info' : 'error',\n                eventName,\n                message: result.success ? \n                    `Application submitted successfully for job ${jobListing.id}` :\n                    `Application failed for job ${jobListing.id}: ${result.errorMessage}`,\n                properties\n            })}`);\n\n        } catch (error) {\n            console.error('Error logging to Application Insights:', error);\n        }\n    }\n\n    /**\n     * Clean up resources and close idle browsers\n     */\n    async cleanup() {\n        const now = Date.now();\n        const maxIdleTime = 5 * 60 * 1000; // 5 minutes\n\n        for (const [browserId, browserData] of this.browsers.entries()) {\n            if (now - browserData.lastActivity > maxIdleTime) {\n                try {\n                    await this.closeBrowser(browserData.browser);\n                    console.log(`🧹 Cleaned up idle browser: ${browserId}`);\n                } catch (error) {\n                    console.error(`Error cleaning up browser ${browserId}:`, error);\n                }\n            }\n        }\n    }\n\n    /**\n     * Get service health status\n     */\n    getHealthStatus() {\n        let queuedOperations = 0;\n        try {\n            if (this.limiter && typeof this.limiter.counts === 'function') {\n                const counts = this.limiter.counts();\n                queuedOperations = (counts.RECEIVED || 0) - (counts.DONE || 0);\n            }\n        } catch (error) {\n            // Fallback for mocked or unavailable limiter\n            queuedOperations = 0;\n        }\n        \n        return {\n            activeBrowsers: this.activeBrowsers,\n            maxConcurrentBrowsers: this.maxConcurrentBrowsers,\n            queuedOperations,\n            status: this.activeBrowsers < this.maxConcurrentBrowsers ? 'healthy' : 'at-capacity'\n        };\n    }\n}\n\n// Export singleton instance\nmodule.exports = new HeadlessBrowserService();\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}