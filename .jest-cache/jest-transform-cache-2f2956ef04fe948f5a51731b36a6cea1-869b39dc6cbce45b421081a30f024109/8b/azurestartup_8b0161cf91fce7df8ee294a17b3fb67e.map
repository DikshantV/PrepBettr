{"version":3,"names":["cov_27qfx6597p","actualCoverage","s","exports","initializeAzureServices","getAzureHealthStatus","azure_config_1","require","f","window","b","console","log","initializeAzureEnvironment","config","getAzureConfig","keyVaultUri","hasSecretsCache","environmentVariables","speechKey","environment","speechEndpoint","azureOpenAIKey","azureOpenAIEndpoint","azureOpenAIDeployment","error","requiredServices","status","reduce","acc","service","overallHealth","Object","values","every","overall","services","keyVault","uri","cached"],"sources":["/Users/dikshantvashistha/PrepBettr/lib/azure-startup.ts"],"sourcesContent":["import { initializeAzureEnvironment, getAzureConfig } from './azure-config';\n\n/**\n * Initialize Azure services on server startup\n * This should be called during Next.js server initialization\n */\nexport async function initializeAzureServices(): Promise<void> {\n  // Only run on server side\n  if (typeof window !== 'undefined') {\n    console.log('🔄 Skipping Azure initialization on client side');\n    return;\n  }\n\n  try {\n    console.log('🚀 Initializing Azure services...');\n    \n    // Initialize Azure environment\n    await initializeAzureEnvironment();\n    \n    // Log configuration status\n    const config = getAzureConfig();\n    console.log('🔍 Azure configuration status:', {\n      keyVaultUri: config.keyVaultUri,\n      hasSecretsCache: config.hasSecretsCache,\n      environmentVariables: {\n        speechKey: config.environment.speechKey ? 'SET' : 'MISSING',\n        speechEndpoint: config.environment.speechEndpoint ? 'SET' : 'MISSING',\n        azureOpenAIKey: config.environment.azureOpenAIKey ? 'SET' : 'MISSING',\n        azureOpenAIEndpoint: config.environment.azureOpenAIEndpoint ? 'SET' : 'MISSING',\n        azureOpenAIDeployment: config.environment.azureOpenAIDeployment ? 'SET' : 'MISSING'\n      }\n    });\n    \n    console.log('✅ Azure services initialized successfully');\n  } catch (error) {\n    console.error('❌ Failed to initialize Azure services:', error);\n    // Don't throw error - let the app continue with fallback environment variables\n  }\n}\n\n/**\n * Health check for Azure services\n */\nexport function getAzureHealthStatus() {\n  const config = getAzureConfig();\n  \n  const requiredServices = [\n    'speechKey',\n    'speechEndpoint', \n    'azureOpenAIKey',\n    'azureOpenAIEndpoint',\n    'azureOpenAIDeployment'\n  ] as const;\n\n  const status = requiredServices.reduce((acc, service) => {\n    acc[service] = config.environment[service] ? 'healthy' : 'missing';\n    return acc;\n  }, {} as Record<typeof requiredServices[number], 'healthy' | 'missing'>);\n\n  const overallHealth = Object.values(status).every(s => s === 'healthy') ? 'healthy' : 'degraded';\n\n  return {\n    overall: overallHealth,\n    services: status,\n    keyVault: {\n      uri: config.keyVaultUri,\n      cached: config.hasSecretsCache\n    }\n  };\n}\n"],"mappings":"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","ignoreList":[]}