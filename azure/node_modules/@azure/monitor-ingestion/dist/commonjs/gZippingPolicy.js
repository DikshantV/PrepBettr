"use strict";
// Copyright (c) Microsoft Corporation.
// Licensed under the MIT License.
Object.defineProperty(exports, "__esModule", { value: true });
exports.GZippingPolicy = exports.gZippingPolicyName = void 0;
const tslib_1 = require("tslib");
const zlib = tslib_1.__importStar(require("zlib"));
const node_util_1 = require("node:util");
const gzip = (0, node_util_1.promisify)(zlib.gzip);
/**
 * Name of the {@link gZippingPolicy}
 */
exports.gZippingPolicyName = "GzippingPolicy";
exports.GZippingPolicy = {
    name: exports.gZippingPolicyName,
    sendRequest: async (req, next) => {
        if (req.body) {
            const buffer = await gzipping(req.body);
            req.body = buffer;
        }
        return next(req);
    },
};
function gzipping(body) {
    return gzip(body);
}
//# sourceMappingURL=gZippingPolicy.js.map