# PrepBettr Azure Resource Cleanup Plan
# Generated: 2025-08-18
# Resource Group: Prepbettr_group

keep:
  # Core application infrastructure
  - name: prepbettr-swa
    type: Microsoft.Web/staticSites
    location: eastus2
    justification: Primary web application deployment (jolly-cliff-0244e530f.2.azurestaticapps.net)
    
  - name: prepbettr-functions
    type: Microsoft.Web/sites
    location: eastus2
    justification: Backend Functions App for business logic
    
  - name: EastUS2Plan
    type: Microsoft.Web/serverFarms
    location: eastus2
    justification: Function App service plan (consumption Y1)
    
  # Data and storage
  - name: prepbettrstorage684
    type: Microsoft.Storage/storageAccounts
    location: eastus2
    justification: Active storage with containers (app-assets, audio-recordings, backups, resumes)
    
  - name: prepbettr-cosmosdb
    type: Microsoft.DocumentDB/databaseAccounts
    location: centralus
    justification: Database with active PrepBettrDB database
    
  - name: prepbettr-keyvault-083
    type: Microsoft.KeyVault/vaults
    location: eastus2
    justification: Centralized secret management with 25+ active secrets
    
  # AI/ML services
  - name: Interview-agent1
    type: Microsoft.CognitiveServices/accounts
    kind: OpenAI
    location: eastus
    justification: OpenAI service for interview generation
    
  - name: prepbettr-speech-services
    type: Microsoft.CognitiveServices/accounts
    kind: SpeechServices
    location: eastus2
    justification: Speech-to-text for interview recordings
    
  - name: prepbettr-document-intelligence
    type: Microsoft.CognitiveServices/accounts
    kind: FormRecognizer
    location: eastus2
    justification: Resume parsing and document intelligence
    
  # Domain management
  - name: prepbettr.com
    type: Microsoft.Network/dnszones
    location: global
    justification: Production domain management

delete:
  # Duplicate/unused infrastructure
  - name: PrepBettr
    type: Microsoft.Web/sites
    location: centralus
    justification: Legacy App Service - replaced by Static Web App
    backup_needed: false
    
  - name: ASP-PrepBettrgroup-943a
    type: Microsoft.Web/serverFarms
    location: centralus
    justification: Unused App Service Plan supporting legacy App Service
    backup_needed: false
    
  - name: prepbettrstorage639
    type: Microsoft.Storage/storageAccounts
    location: eastus2
    justification: Empty storage account with no containers or data
    backup_needed: false
    
  # Legacy monitoring
  - name: PrepBettr
    type: microsoft.insights/components
    location: centralus
    justification: Legacy App Insights - SWA has its own monitoring
    backup_needed: false
    
  - name: oidc-msi-bd2d
    type: Microsoft.ManagedIdentity/userAssignedIdentities
    location: centralus
    justification: Associated with legacy App Service, no longer needed
    backup_needed: false

review:
  # Monitoring infrastructure - needs validation
  - name: Application Insights Smart Detection
    type: microsoft.insights/actiongroups
    location: global
    justification: Auto-generated, may be referenced by other services
    
  - name: prepbettr-speech-alerts
    type: Microsoft.Insights/actiongroups
    location: global
    justification: Speech service monitoring - verify if alerts are configured
    
  - name: speech-high-error-rate
    type: Microsoft.Insights/metricalerts
    location: global
    justification: Speech service alert - verify necessity
    
  - name: speech-throttling
    type: Microsoft.Insights/metricalerts
    location: global
    justification: Speech service alert - verify necessity
    
  - name: speech-high-usage
    type: Microsoft.Insights/metricalerts
    location: global
    justification: Speech service alert - verify necessity

cost_impact:
  current_monthly_estimate: "$150-200 USD"
  post_cleanup_estimate: "$120-150 USD"
  savings: "$30-50 USD per month"
  
risks:
  low:
    - App Service and plan are not referenced in current deployment
    - Empty storage account poses no data loss risk
    - Legacy monitoring resources can be recreated if needed
  medium:
    - DNS zone deletion would break custom domain (keep this)
    - Monitoring alerts may affect operational visibility

validation_required:
  - Confirm PrepBettr App Service has no traffic (last 30 days)
  - Verify no dependencies on legacy Application Insights
  - Check if speech alerts are actively used by operations team
  - Validate backup procedures for Key Vault secrets
